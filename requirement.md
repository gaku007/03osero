# オセロゲーム 要件定義

## 1. 目的
- 2人対戦のオセロ（リバーシ）ゲームをブラウザ上でプレイできるようにする。
- 初心者でも操作方法が直感的に理解でき、ゲームルールの確認も行えるようにする。
- シンプルで軽量な構成とし、PC・タブレット・スマートフォンで同様に利用できるレスポンシブデザインを採用する。

## 2. 利用想定環境
- Webブラウザ（最新の Chrome, Firefox, Safari, Edge）で動作。
- JavaScript を有効化していること。

## 3. 利用者
- 対面での2人プレイヤー。
- オプションとしてコンピュータ対戦（AI）を実装する場合を想定。

## 4. ゲームルール
1. 8×8 の盤面を使用する。
2. 初期配置は中央4マスに白黒2枚ずつ斜向かいで配置する。
3. 黒が先手、白が後手とする。
4. 自分の番で裏返せるマスが存在する場合、そこに駒を置くのが必須。
5. 駒は縦・横・斜め方向に相手の駒を自分の駒で挟んだ場合に裏返す。
6. 置けるマスが無い場合はパスとする。
7. 両者が連続でパスする、または盤面が全て埋まった時点でゲーム終了とする。
8. 終局時に盤面上の石数が多い方を勝者とする。

## 5. 機能要件
### 5.1 基本機能
- 新規対局開始ボタン。
- 現在のプレイヤー（手番）表示。
- 合法手のハイライト表示とマス選択。
- 駒を置いた際の自動裏返し処理。
- 駒数カウントと画面表示。
- 対局終了時の勝敗表示と再戦ボタン。
- 合法手がない場合の自動パス処理と通知。

### 5.2 オプション機能
- プレイヤー対コンピュータ（1人プレイ）モード。
  - 難易度設定（例: 初級: ランダム手、中級: ヒューリスティック評価）。
- 一手戻す（Undo）機能。
- 対局履歴の保存と閲覧。
- アニメーション設定のON/OFF。

## 6. 非機能要件
- 盤面操作と石裏返し処理は0.5秒以内に応答。
- 主要操作はキーボード操作にも対応（矢印キーでマス移動、Enterで配置）。
- 配色コントラストを十分に確保し、視認性を高める。
- スクリーンリーダー利用者向けに盤面状態のテキスト出力を提供。

## 7. 画面/UX
- 盤面は常に正方形で表示し、デバイス幅に応じてサイズ調整。
- 合法手は枠線または透明度変化で表示し、クリック/タップで着手。
- 手番表示と残り時間（実装する場合）を盤面周辺に配置。
- 再戦、設定、ルール説明へのアクセスボタンをヘッダーまたはフッターに配置。
- パスが発生した際はモーダルまたはトーストで通知。

## 8. データ構造・状態管理
- 8×8 の盤面配列（2次元配列または一次配列＋座標計算）。
- プレイヤー情報（黒/白、AI有無）。
- 履歴管理（Undo 用に盤面スナップショットまたは差分をスタックで保持）。
- 設定情報（サウンドON/OFF、アニメーションON/OFF など）。

## 9. サウンド・アニメーション
- 石を置いた時と裏返した時の効果音（ミュート設定可）。
- 駒が裏返る際の簡単なアニメーション（0.2〜0.3秒程度）。
- パス通知や終了時のフィードバック音。

## 10. ローカライズ
- 初期リリースは日本語。
- テキストは翻訳対応を見据えた構造（i18n対応）。

## 11. ルール説明
- ルール説明ページまたはモーダルを用意し、基本ルールと操作方法、特殊ケース（パス、終局）の説明を掲載。
- FAQ またはヒントセクションでよくある質問をカバー。

## 12. テスト項目
- 盤面初期化テスト（初期配置が正しいか）。
- 合法手判定テスト（各方向への挟み込み判定）。
- パス判定テスト（合法手が無いケース）。
- 終局判定テスト（盤面満杯、両者パス）。
- Undo/Redo（実装する場合）動作テスト。
- AI対戦モードでの手番交代と合法手生成テスト。
- レスポンシブ表示確認（PC/タブレット/スマホ）。

## 13. 今後の拡張想定
- オンライン対戦機能（リアルタイム通信、マッチング）。
- アカウント管理とランキング表示。
- 戦略解説モード（推奨手の提示）。
- トレーニングモード（定石問題の提供）。

## 14. 用語集
- **石（ディスク）**: 盤面に配置する黒または白の駒。
- **合法手**: 現在の手番のプレイヤーが石を置けるマスで、置いた後に1枚以上の相手の石を挟んで裏返せる手。
- **パス**: 合法手が存在しないために手番を相手へ渡すこと。
- **終局**: 双方が打つ手がなくなりゲームが終了した状態。

